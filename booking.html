<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Now | Lux VIP Charters Perth</title>
    <meta name="description"
        content="Secure your luxury ride with Lux VIP Charters. Easy online booking for airport transfers, corporate travel, and events.">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Navigation -->
    <header class="header">
        <nav class="navbar">
            <a href="index.html" class="logo">Lux VIP Charters <span class="text-gold">Perth</span></a>
            <div class="nav-links">
                <a href="index.html" class="nav-link">Home</a>
                <div class="dropdown">
                    <a href="#" class="nav-link">Services <i class="fas fa-chevron-down"></i></a>
                    <div class="dropdown-content">
                        <a href="corporate.html">Corporate Transfers</a>
                        <a href="airport.html">Airport Transfers</a>
                        <a href="vip.html">V-VIP / Celebrity</a>
                        <a href="wedding.html">Weddings</a>
                        <a href="tours.html">Wine Tours</a>
                        <a href="golf.html">Golf Tours</a>
                        <a href="schoolball.html">School Ball</a>
                        <a href="events.html">Events</a>
                        <a href="other.html">Other</a>
                        <a href="terms.html">T&Cs</a>
                    </div>
                </div>
                <a href="fleet.html" class="nav-link">Fleet</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="booking.html" class="btn-gold nav-btn active">Book Now</a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Page Header -->
    <section class="page-header"
        style="background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('images/desktop/Lux_Car_Perth_Hire_(1).jpg') center/cover;">
        <h1>Book Your Luxury Ride</h1>
        <p>Reserve Your Premium Chauffeur Service</p>
    </section>

    <!-- Booking Form Section -->
    <section class="booking-page">
        <div class="container">
            <div class="booking-form-container"
                style="max-width: 800px; margin: 0 auto; background-color: var(--bg-card); padding: 3rem; border-radius: 10px; border: 1px solid rgba(212, 175, 55, 0.2);">
                <form id="bookingForm">
                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="name" style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Full
                            Name</label>
                        <input type="text" id="name" name="name" required
                            style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="email" style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Email
                            Address</label>
                        <input type="email" id="email" name="email" required
                            style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="phone" style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Phone
                            Number</label>
                        <input type="tel" id="phone" name="phone" required
                            style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                    </div>

                    <div class="form-row"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label for="date"
                                style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Date</label>
                            <input type="date" id="date" name="date" required
                                style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                        </div>
                        <div class="form-group">
                            <label for="time"
                                style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Time</label>
                            <input type="time" id="time" name="time" required
                                style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label for="service" style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Service
                            Type</label>
                        <select id="service" name="service" required
                            style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                            <option value="">Select Service Type</option>
                            <option value="airport">Airport</option>
                            <option value="corporate">Corporate</option>
                            <option value="celebrity">Celebrity/V-VIP</option>
                            <option value="wedding">Weddings</option>
                            <option value="wine-tour">Wine Tour</option>
                            <option value="school-ball">School Ball</option>
                            <option value="events">Events</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 1rem; color: var(--gold);">Vehicle Type</label>
                        <div class="vehicle-selection"
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="s-class" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(1).jpg" alt="Mercedes S-Class"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes S-Class</div>
                            </label>
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="v-class" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(6).jpg" alt="Mercedes V-Class"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes V-Class</div>
                            </label>
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="e-class" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(11).jpg" alt="Mercedes E-Class"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes E-Class</div>
                            </label>
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="c-class" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(3).jpg" alt="Mercedes C-Class"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes C-Class</div>
                            </label>
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="gls" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(5).jpg" alt="Mercedes GLS"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes GLS</div>
                            </label>
                            <label class="vehicle-option"
                                style="cursor: pointer; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; padding: 1rem; text-align: center; transition: all 0.3s;">
                                <input type="radio" name="vehicle" value="maybach" required style="display: none;">
                                <img src="images/desktop/Lux_Car_Perth_Hire_(7).jpg" alt="Mercedes Maybach"
                                    style="width: 100%; height: 100px; object-fit: cover; border-radius: 5px; margin-bottom: 0.5rem;">
                                <div style="color: #fff; font-size: 0.9rem;">Mercedes Maybach</div>
                            </label>
                        </div>
                    </div>

                    <div class="form-row"
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div class="form-group">
                            <label for="passengers"
                                style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Number of
                                Passengers</label>
                            <input type="number" id="passengers" name="passengers" min="1" required
                                style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                        </div>
                        <div class="form-group">
                            <label for="luggage"
                                style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Luggage
                                Count</label>
                            <input type="number" id="luggage" name="luggage" min="0" required
                                style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label
                            style="display: flex; align-items: center; gap: 0.5rem; color: var(--gold); cursor: pointer;">
                            <input type="checkbox" id="return-trip" name="return-trip"
                                style="width: 20px; height: 20px; cursor: pointer;">
                            <span>Return Journey</span>
                        </label>
                    </div>

                    <div id="return-trip-details" style="display: none; margin-bottom: 1.5rem;">
                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                            <div class="form-group">
                                <label for="return-date"
                                    style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Return
                                    Date</label>
                                <input type="date" id="return-date" name="return-date"
                                    style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                            </div>
                            <div class="form-group">
                                <label for="return-time"
                                    style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Return
                                    Time</label>
                                <input type="time" id="return-time" name="return-time"
                                    style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;">
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 2rem;">
                        <label for="message"
                            style="display: block; margin-bottom: 0.5rem; color: var(--gold);">Additional
                            Details <span
                                style="color: var(--text-secondary); font-size: 0.85rem;">(Optional)</span></label>
                        <textarea id="message" name="message" rows="4"
                            style="width: 100%; padding: 12px; background-color: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 5px;"></textarea>
                    </div>

                    <button type="submit" disabled class="btn-gold" style="width: 100%;">Submit Booking Request</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>Lux VIP Charters <span class="text-gold">Perth</span></h2>
                    <p>Premium chauffeur services in Perth, providing luxury, comfort, and reliability for all your
                        travel needs.</p>
                </div>
                <div class="footer-links">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="fleet.html">Fleet</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-social">
                    <h3>Follow Us</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Lux VIP Charters Perth. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Return trip toggle
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;

            container.appendChild(toast);

            // Show the toast
            setTimeout(() => toast.classList.add('show'), 100);

            // Remove toast after 4 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => container.removeChild(toast), 500);
            }, 4000);
        }
        const returnTripCheckbox = document.getElementById('return-trip');
        const returnTripDetails = document.getElementById('return-trip-details');

        if (returnTripCheckbox && returnTripDetails) {
            returnTripCheckbox.addEventListener('change', function () {
                if (this.checked) {
                    returnTripDetails.style.display = 'block';
                } else {
                    returnTripDetails.style.display = 'none';
                }
            });
        }

        // Vehicle selection styling
        const vehicleOptions = document.querySelectorAll('.vehicle-option');
        vehicleOptions.forEach(option => {
            const radio = option.querySelector('input[type="radio"]');

            option.addEventListener('click', function () {
                vehicleOptions.forEach(opt => {
                    opt.style.borderColor = 'rgba(255,255,255,0.1)';
                    opt.style.backgroundColor = 'transparent';
                });
                this.style.borderColor = 'var(--gold)';
                this.style.backgroundColor = 'rgba(255, 196, 0, 0.1)';
                radio.checked = true;
            });

            if (radio.checked) {
                option.style.borderColor = 'var(--gold)';
                option.style.backgroundColor = 'rgba(255, 196, 0, 0.1)';
            }
        });

        // Form submission with API
        document.getElementById('bookingForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                service: document.getElementById('service').value,
                vehicle: document.querySelector('input[name="vehicle"]:checked')?.value,
                passengers: document.getElementById('passengers').value,
                luggage: document.getElementById('luggage').value,
                'return-trip': document.getElementById('return-trip').checked,
                'return-date': document.getElementById('return-date').value,
                'return-time': document.getElementById('return-time').value,
                message: document.getElementById('message').value
            };

            try {
                const submitButton = e.target.querySelector('button[type="submit"]');
                const originalText = submitButton.textContent;
                submitButton.disabled = true;
                submitButton.textContent = 'Submitting...';

                // Determine the base URL
                let baseUrl = window.location.origin;

                // If opened via file://, use localhost:3000
                if (baseUrl === 'null' || baseUrl.startsWith('file://') || baseUrl === '') {
                    baseUrl = 'http://localhost:3000';
                    console.warn('âš ï¸ Page opened via file://. Using http://localhost:3000');
                    console.warn('ðŸ’¡ Tip: Access the page via http://localhost:3000/booking.html for best results');
                }

                const apiUrl = baseUrl + '/api/booking';

                console.log('Submitting to:', apiUrl);
                console.log('Form data:', formData);

                // First, test if server is running
                try {
                    const testResponse = await fetch(baseUrl + '/api/test', {
                        method: 'GET',
                        mode: 'cors'
                    });
                    if (!testResponse.ok) {
                        throw new Error('Server test failed');
                    }
                    const testData = await testResponse.json();
                    console.log('âœ… Server is accessible:', testData);
                } catch (testError) {
                    console.error('âŒ Server connection test failed:', testError);
                    throw new Error('Cannot connect to server. Please make sure the server is running. Open http://localhost:3000/booking.html in your browser.');
                }

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    mode: 'cors',
                    body: JSON.stringify(formData)
                });

                // Check if response is ok
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ message: 'Server error occurred' }));
                    throw new Error(errorData.message || `Server error: ${response.status}`);
                }

                const data = await response.json();

                if (data.success) {
                    showToast(data.message || 'Thank you for your booking request! We will contact you shortly.', 'success');
                    e.target.reset();
                    vehicleOptions.forEach(opt => {
                        opt.style.borderColor = 'rgba(255,255,255,0.1)';
                        opt.style.backgroundColor = 'transparent';
                    });
                    returnTripDetails.style.display = 'none';
                    returnTripCheckbox.checked = false;
                } else {
                    showToast(data.message || 'Failed to submit booking request. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error submitting booking:', error);
                showToast(`Error: ${error.message || 'An error occurred. Please try again later.'}`, 'error');
            } finally {
                const submitButton = e.target.querySelector('button[type="submit"]');
                submitButton.disabled = false;
                submitButton.textContent = 'Submit Booking Request';
            }
        });
    </script>
    <div id="toast-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999;"></div>
</body>

</html>